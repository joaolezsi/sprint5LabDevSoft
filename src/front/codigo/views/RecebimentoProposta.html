<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Recebimento de Proposta</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/negociacao.css">
  </head>
  <body>
    <!-- Navbar existente -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light" style=" padding: 0;margin:0;box-sizing: border-box;"  >
      <div class="container-fluid" style="background-color: white;">
        <a class="navbar-brand" style="color: #4caf4f; font-weight: bold; margin-left: 120px; font-size: 25px;" href="../views/paginaInicial.html"><img src="../assets/img/logo.png" alt="" style="height: 50px;width: 50px;">Recompensa Verde</a>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav" style="display: flex; justify-content: flex-end;">
             
              <!-- Parte dinâmica para mostrar login/cadastro ou dropdown -->
              <div id="auth-section" >
                  <!-- Se o usuário estiver logado, exibe a foto do perfil -->
                  <div class="dropdown d-none" id="user-dropdown" >
                      <img src="../assets/img/user.png" class="rounded-circle" width="45" height="45" 
                          id="profileDropdown" role="button" data-bs-toggle="dropdown" alt="Perfil" style="margin-right: 170px;">
                      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown" style="margin-right: 100px;">
                        <li><a class="dropdown-item" href="../views/perfil.html">Perfil</a></li>
                        <li><a class="dropdown-item" href="../views/sobre&Indicadores.html">Sobre nós</a></li>
                        <li><a class="dropdown-item" id="exibirReciclaveis" href="../views/exibirReciclaveis.html">Comprar Recicláveis</a></li>
                        <li><a class="dropdown-item" id="cadastrarReciclaveis" href="../views/cadastroDeReciclaveis.html">Cadastro de  Recicláveis</a></li>
                        <li><a class="dropdown-item" id="receberSolicitacao" href="../views/recebeSolicitacao.html">Solicitação de Pedidos</a></li>
                        <li><a class="dropdown-item" id="receberProposta" href="../views/RecebimentoProposta.html">Pedidos em negociação</a></li>
                        <li><a class="dropdown-item" id="enviarProposta" href="../views/EnvioProposta.html">Pedidos em negociação</a></li>
                              <hr class="dropdown-divider">
                          </li>
                          <li><a class="dropdown-item" id="logout" href="#">Sair</a></li>
                      </ul>
                  </div>
  
                  <!-- Se o usuário não estiver logado, exibe os botões -->
                  <div id="auth-buttons" style="margin-right: 100px;">
                      <a href="../views/Login.html" class="btn btn-outline-primary me-2" style="color: #4caf4f;border: 1px solid #4caf4f; background-color: white;">Entrar</a>
                      <a href="../views/cadastro.html" class="btn btn-primary" style="color: white;border: #4caf4f;background-color: #4caf4f;">Cadastrar</a>
                  </div>
              </div>
          </div>
      </div>
  </nav>

    <div id="alerta" class="alert-container"></div>

    <div class="negociacao-container">
      <!-- Dropdown para selecionar a proposta -->
      <div class="mb-3">
          <label for="propostaSelect" class="form-label">Selecione uma Proposta</label>
          <select class="form-select" id="propostaSelect">
              <option value="">Selecione uma Proposta</option>
          </select>
      </div>
      <!-- Formulário de Recebimento de Proposta -->
      <div class="proposta-section">
        <div class="card">
          <div class="card-header bg-success text-white">
            <h5 class="card-title mb-0">Recebimento de Proposta</h5>
          </div>
          <div class="card-body">
            <form id="propostaForm">
              <input type="hidden" id="propostaId">          
              <div class="row mb-3">
                <div class="col-md-6">
                  <label class="form-label">Nome da Empresa Compradora</label>
                  <input type="text" class="form-control" id="nomeEmpresa" required minlength="3" readonly>
                </div>
                <div class="col-md-6">
                  <label class="form-label">CNPJ</label>
                  <input type="text" class="form-control" id="cnpj" required readonly>
                </div>
              </div>
              
              <div class="row mb-3">
                <div class="col-md-4">
                  <label class="form-label">Valor por kg (R$)</label>
                  <input type="number" class="form-control" id="valorKg" required min="0" step="0.01">
                </div>
                <div class="col-md-4">
                  <label class="form-label">Quantidade (kg)</label>
                  <input type="number" class="form-control" id="quantidade" required min="0">
                </div>
                <div class="col-md-4">
                  <label class="form-label">Valor Total (R$)</label>
                  <input type="text" class="form-control" id="valorTotal" readonly>
                </div>
              </div>

              <div class="desconto-info alert alert-info d-none">
                O cliente recebeu um desconto de 5% nessa transação por ter realizado 5 ou mais compras conosco.
              </div>

              <div class="row mb-3">
                <div class="col-12">
                  <label class="form-label">Observações</label>
                  <textarea class="form-control" id="observacoes" rows="3"></textarea>
                </div>
              </div>
            
              <div class="d-flex justify-content-end gap-2">
                <button type="button" class="btn btn-secondary" id="btnContraproposta">Contraproposta</button>
                <button type="button" class="btn btn-secondary" id="btnRecusar">Recusar</button>
                <button type="submit" class="btn btn-success" id="btnAceitar">Aceitar Proposta</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/navbarGlobal.js"></script>
    <script src="../js/recebimentoProposta.js"></script>
  </body>
</html>